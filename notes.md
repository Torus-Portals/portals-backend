pub fn create_user(
  new_user_json: web::Json<NewUser>, 
  pool: web::Data<Pool>
) -> impl Future<Item = HttpResponse, Error = Error> {
  // println!("Hello!! {:#?}", &new_user);
  // let new_user = NewUser::from_json()
  // fut_ok(HttpResponse::Created().json(new_user_json.0))

  ...
}

https://cetra3.github.io/blog/face-detection-with-actix-web/

## Futures

```
TL;DR: then is used when you want to do something regardless of if the future was successful or not, and_then runs the closure only when the future succeeded, and or_else runs the closure only when the future failed.
```

https://docs.rs/future-by-example/0.1.0/future_by_example/

fut_ok wraps things in a future.

## Debugging

```
// print out actual query that is generated by diesel:
use diesel::debug_query;

println!("{}", debug_query::<diesel::pg::Pg, _>(&query));
```

## Dealing with JWTs

#### Helpful links
1. You can find the Auth0 certificate for the cert.crt file here: https://torus-rocks.auth0.com/.well-known/jwks.json. The cert is the first entry under "x5c"
2. https://github.com/Keats/jsonwebtoken/issues/62: tells you the commands to go from the cert.crt to an rsa .der
3. https://support.ssl.com/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them: some good info on certs/pem/der

```
// check out x5c cert:
openssl x509 -in certificate.crt -text -noout

// convert cert.crt from x5c to auth0.der file needed:
openssl x509 -pubkey -noout -in  auth0.pem  > auth0_pkey.pem
openssl rsa -pubin -in auth0_pkey.pem  -RSAPublicKey_out -outform DER -out auth0.der
```

Don't forget to wrap cet from x5c with: 
```
-----BEGIN CERTIFICATE-----
    ...cert goes here...
-----END CERTIFICATE-----
```

## Diesel

```
$ diesel migration redo
$ diesel migration run
```